---
title: "Fixing SailPoint Federated SSO Error: AADSTS75011 in Azure AD"
author: Atul Gupta
date: 2025-06-22
tags: [SailPoint, Azure AD, SSO, IdentityIQ, Federation, AADSTS75011]
---

# üöÄ Fixing SailPoint Federated SSO Error with Azure AD : AADSTS75011
## Summary

When integrating SailPoint IdentityIQ (as the SAML Service Provider) with Azure AD (as the Identity Provider), users may encounter the following error during login:

```
AADSTS75011: Authentication method 'X509, MultiFactor, X509Device' by which the user authenticated with the service doesn't match requested authentication method 'Password, ProtectedTransport'.
```

This error occurs when SailPoint's SAML request explicitly includes a `RequestedAuthnContext`, asking Azure AD to use a specific authentication method (`PasswordProtectedTransport`). If the user logs in with a different method (e.g., certificate-based auth or MFA), Azure rejects the request.

---

This tech note explains the root cause and how to resolve it with a simple update in your **SAML configuration** in SailPoint.

## üß† Root Cause
<<<<<<< HEAD:docs/Sailpoint/AzureIDPSSOFailure_SailpointSP_AADSTS75011.md

=======
>>>>>>> ed6105ccff8e434d4d9a91d02f333609a10899ca:SailpointSSOError_AADSTS75011.md
Azure AD expects a specific **Authentication Context** in the SAML request ‚Äî usually something like:

```text
PasswordProtectedTransport
```

But if the user signs in using **Smartcard (X509)** or **MFA**, the methods don't match, causing **AADSTS75011**.

By default, SailPoint might send a stricter AuthnContext, triggering this error when Azure requires flexibility.

---
<<<<<<< HEAD:docs/Sailpoint/AzureIDPSSOFailure_SailpointSP_AADSTS75011.md
=======

>>>>>>> ed6105ccff8e434d4d9a91d02f333609a10899ca:SailpointSSOError_AADSTS75011.md

The `AuthnRequest` generated by SailPoint includes the following XML block:

```xml
<saml2p:RequestedAuthnContext Comparison="exact">
  <saml2:AuthnContextClassRef xmlns:saml2="urn:oasis:names:tc:SAML:2.0:assertion">
    urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport
  </saml2:AuthnContextClassRef>
</saml2p:RequestedAuthnContext>
```

This block tells Azure AD to accept **only** username/password authentication. If Azure performs certificate or MFA-based login, it considers the request invalid.

## üõ†Ô∏è Solution ‚Äì Use `unspecified` AuthnContext

To resolve the mismatch, override the SAML configuration in SailPoint to use a relaxed AuthnContext:

### ‚úÖ Modified `SAMLConfig` (in SailPoint IIQ Configuration ‚Üí SAML object):

```xml
<SAMLConfig
<<<<<<< HEAD:docs/Sailpoint/AzureIDPSSOFailure_SailpointSP_AADSTS75011.md
  assertionConsumerService="https://mysailpoint.com/identityiq/home.jsf"
=======
  assertionConsumerService="https://web.accessio.prd.gcp.db.com/identityiq/home.jsf"
>>>>>>> ed6105ccff8e434d4d9a91d02f333609a10899ca:SailpointSSOError_AADSTS75011.md
  authnContextClassRef="urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified"
  bindingMethod="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
  entityId="https://web-preprod.accessio.prd.gcp.db.com/identityiq"
  idpServiceUrl="https://login.microsoftonline.com/<tenant_id>/saml2"
  issuer="https://sts.windows.net/<tenant_id>/"
  nameIdFormat="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"
>
...
</SAMLConfig>
```

---

## Use Case Scenario: Multiple SPs Sharing the Same IDP (Azure AD)

This issue may occur in environments where **multiple Service Providers (SPs)** are integrated with a **shared Identity Provider (Azure AD)**.

### üîÅ Example Scenario:

* **ForgeRock** and **SailPoint** are both configured as SPs pointing to Azure AD.
* A user first logs in to **ForgeRock** via Azure AD and successfully authenticates using certificate-based login (e.g., X.509).
* In the **same browser session**, the user then tries to access **SailPoint**, which sends a SAML request requiring `PasswordProtectedTransport`.
* Azure AD rejects this second request with error `AADSTS75011` because the initial session used X.509, which doesn't match the requested password-based method.

### üîç Insight:

Azure AD reuses the **existing session and authentication context** unless a new or forced login is required. The mismatch triggers a failure when `RequestedAuthnContext` constraints are applied.

---
## üí° Why This Works

<<<<<<< HEAD:docs/Sailpoint/AzureIDPSSOFailure_SailpointSP_AADSTS75011.md
## üí° Why This Works

Setting:

```xml
authnContextClassRef="urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified"
```

tells Azure AD:

=======
Setting:

```xml
authnContextClassRef="urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified"
```

tells Azure AD:

>>>>>>> ed6105ccff8e434d4d9a91d02f333609a10899ca:SailpointSSOError_AADSTS75011.md
> _"Use **whatever method** the user already authenticated with (password, X509, MFA, etc.) ‚Äî don't enforce a specific one."_

---

## How to Verify the Issue

### Using Microsoft Edge or Chrome:

1. Open **DevTools** (`F12`) and go to the **Network** tab.
2. Trigger the SSO login from SailPoint.
3. Look for a request to `https://login.microsoftonline.com/...` containing `SAMLRequest`.
4. Copy the `SAMLRequest` value.
5. Use [https://www.samltool.com/decode.php](https://www.samltool.com/decode.php) to decode it, or decode locally using PowerShell.

### PowerShell Decode Script:

```powershell
Add-Type -AssemblyName System.IO.Compression.FileSystem
Add-Type -AssemblyName System.Web

$encoded = "<YourSAMLRequestHere>"
$decodedUrl = [System.Web.HttpUtility]::UrlDecode($encoded)
$bytes = [System.Convert]::FromBase64String($decodedUrl)
$input = New-Object System.IO.MemoryStream(,$bytes)
$output = New-Object System.IO.MemoryStream
$deflate = New-Object System.IO.Compression.DeflateStream($input, [System.IO.Compression.CompressionMode]::Decompress)

$deflate.CopyTo($output)
$deflate.Close()
$output.Position = 0
$reader = New-Object System.IO.StreamReader($output)
$xml = $reader.ReadToEnd()
$reader.Close()
$xml
```

---

## Outcome

Once the `RequestedAuthnContext` is removed, Azure AD will accept any valid user authentication method (password, MFA, X.509, etc.), and the `AADSTS75011` error will no longer occur.

---

## References

* [Microsoft AADSTS75011 Documentation](https://learn.microsoft.com/en-us/azure/active-directory/develop/reference-aadsts-error-codes#aadsts75011)
* [SAMLTool.com Decoder](https://www.samltool.com/decode.php)
* SailPoint IdentityIQ SAML Configuration

---
<<<<<<< HEAD:docs/Sailpoint/AzureIDPSSOFailure_SailpointSP_AADSTS75011.md

=======
>>>>>>> ed6105ccff8e434d4d9a91d02f333609a10899ca:SailpointSSOError_AADSTS75011.md
## üßæ Reference Error Screenshot

![AADSTS75011 Error in SailPoint](../assets/images/sailpoint-saml-aadsts75011.png)

---

## üìù Summary

| Key | Value |
|-----|-------|
| Platform | SailPoint IdentityIQ + Azure AD |
| Issue | AADSTS75011 SAML AuthnContext mismatch |
| Fix | Add `authnContextClassRef="unspecified"` in `SAMLConfig` |
| Affected | SSO with MFA/X509 logins |
| Verified | ‚úÖ Fix working as of June 2025 |

---
<<<<<<< HEAD:docs/Sailpoint/AzureIDPSSOFailure_SailpointSP_AADSTS75011.md

=======
>>>>>>> ed6105ccff8e434d4d9a91d02f333609a10899ca:SailpointSSOError_AADSTS75011.md
**üìÑ Document Info**  

*Author:* Atul Gupta  
*Title:* Azure AD SSO Issue ‚Äì SailPoint & RequestedAuthnContext  
*Created:* June 2025  
*Use Case:* Multi-SP to Azure IDP session sharing  
*Tooling:* SailPoint IdentityIQ, Azure AD, SAML Tracer, PowerShell  

> _‚ÄúWhen two Service Providers share a session with the same IDP, alignment in AuthN context becomes critical.‚Äù_ 

---

## üìò * Document Footer - Easy Bytes by Atul Gupta*  
This guide is part of the **Easy Bytes** knowledge series ‚Äî thoughtfully crafted by **Atul Gupta**, IAM Architect & Full-Stack Developer.

üîó [Explore more](https://github.com/atul0085)‚ÄÉ|‚ÄÉüì¨ [Connect](https://www.linkedin.com/in/atul0085)  
üõ†Ô∏è Focus Areas: **IAM**, **SailPoint**, **ForgeRock**, **Okta**, **Azure AD**, **Blazor**, **Cloud**, **Automation**  
> _‚ÄúSharpening skills. Sharing solutions. Securing identities.‚Äù_
